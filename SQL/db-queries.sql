CREATE DATABASE  IF NOT EXISTS `DB`;
USE `db`;

DROP TABLE IF EXISTS `EMP`;
DROP TABLE IF EXISTS `DEPT`;

DROP TABLE IF EXISTS `REGIONS`;
DROP TABLE IF EXISTS `COUNTRIES`;
DROP TABLE IF EXISTS `LOCATIONS`;


CREATE TABLE DEPT (
 DEPTNO INTEGER NOT NULL,
 DNAME VARCHAR(14),
 LOC VARCHAR(13), CONSTRAINT DEPT_PRIMARY_KEY PRIMARY KEY (DEPTNO));
 
INSERT INTO DEPT VALUES (10,'ACCOUNTING','NEW YORK');
INSERT INTO DEPT VALUES (20,'RESEARCH','DALLAS');
INSERT INTO DEPT VALUES (30,'SALES','CHICAGO');
INSERT INTO DEPT VALUES (40,'OPERATIONS','BOSTON');

CREATE TABLE EMP (
 EMPNO INTEGER NOT NULL,
 ENAME VARCHAR(10),
 JOB VARCHAR(9),
 MGR INTEGER ,CONSTRAINT EMP_SELF_KEY FOREIGN KEY (`EMPNO`) REFERENCES EMP (EMPNO),
 HIREDATE DATETIME,
 SAL INTEGER,
 COMM INTEGER,
 DEPTNO INTEGER NOT NULL, CONSTRAINT EMP_FOREIGN_KEY FOREIGN KEY (DEPTNO) REFERENCES `DEPT` (DEPTNO), PRIMARY KEY (EMPNO),
   KEY `EMP_SELF_KEY` (`EMPNO`),
	KEY `EMP_FOREIGN_KEY` (`DEPTNO`));

INSERT INTO EMP VALUES (7839,'KING','PRESIDENT', NULL,'1981-11-17',5000, NULL,10);
INSERT INTO EMP VALUES (7698,'BLAKE','MANAGER',7839,'1981-05-01',2850, NULL,30);
INSERT INTO EMP VALUES (7782,'CLARK','MANAGER',7839,'1981-06-06',2450, NULL,10);
INSERT INTO EMP VALUES (7566,'JONES','MANAGER',7839,'1981-04-02',2975, NULL,20);
INSERT INTO EMP VALUES (7654,'MARTIN','SALESMAN',7698,'1981-09-28',1250,1400,30);
INSERT INTO EMP VALUES (7499,'ALLEN','SALESMAN',7698,'1981-02-20',1600,300,30);
INSERT INTO EMP VALUES (7844,'TURNER','SALESMAN',7698,'1981-09-08',1500,0,30);
INSERT INTO EMP VALUES (7900,'JAMES','CLERK',7698,'1981-12-03',950, NULL,30);
INSERT INTO EMP VALUES (7521,'WARD','SALESMAN',7698,'1981-02-22',1250,500,30);
INSERT INTO EMP VALUES (7902,'FORD','ANALYST',7566,'1981-12-03',3000, NULL,20);
INSERT INTO EMP VALUES (7369,'SMITH','CLERK',7902,'1982-12-17',800, NULL,20);
INSERT INTO EMP VALUES (7788,'SCOTT','ANALYST',7566,'1982-12-17',3000, NULL,20);
INSERT INTO EMP VALUES (7876,'ADAMS','CLERK',7788,'1983-01-12',1100, NULL,20);
INSERT INTO EMP VALUES (7934,'MILLER','CLERK',7782,'1982-01-12',1300, NULL,10);


CREATE TABLE REGIONS(region_id INT NOT NULL , region_name VARCHAR(25) ,
 PRIMARY KEY (region_id));

CREATE TABLE COUNTRIES 
 (COUNTRY_ID CHAR(2) NOT NULL 
, COUNTRY_NAME VARCHAR(40) 
, REGION_ID INT 
, PRIMARY KEY (COUNTRY_ID) ,
CONSTRAINT COUNTR_REG_FK FOREIGN KEY (REGION_ID) REFERENCES REGIONS(REGION_ID) ON DELETE CASCADE ON UPDATE CASCADE,
KEY `COUNTR_REG_FK` (`REGION_ID`));

CREATE TABLE LOCATIONS (LOCATION_ID INT NOT NULL, STREET_ADDRESS VARCHAR(40), POSTAL_CODE VARCHAR(12), CITY VARCHAR(30) NOT NULL, STATE_PROVINCE VARCHAR(25)
, COUNTRY_ID CHAR(2),
PRIMARY KEY (LOCATION_ID),
 CONSTRAINT LOC_C_ID_FK FOREIGN KEY (COUNTRY_ID) REFERENCES COUNTRIES(COUNTRY_ID) ON DELETE CASCADE ON UPDATE CASCADE,
KEY `LOC_C_ID_FK` (`COUNTRY_ID`));


INSERT INTO regions VALUES(1, 'Europe');
INSERT INTO regions VALUES(2, 'Americas');
INSERT INTO regions VALUES(3, 'Asia');
INSERT INTO regions VALUES(4, 'Middle East and Africa');


INSERT INTO countries VALUES('IT', 'Italy', 1);
INSERT INTO countries VALUES('JP', 'Japan', 3);
INSERT INTO countries VALUES('US', 'United States of America', 2);
INSERT INTO countries VALUES('CA', 'Canada', 2);
INSERT INTO countries VALUES('CN', 'China', 3);
INSERT INTO countries VALUES('IN', 'India', 3);
INSERT INTO countries VALUES('AU', 'Australia', 3);
INSERT INTO countries VALUES('ZW', 'Zimbabwe',4);


INSERT INTO locations VALUES( 1000, '1297 Via Cola di Rie', '00989', 'Roma', NULL, 'IT');
INSERT INTO locations VALUES( 1100, '93091 Calle della Testa', '10934', 'Venice', NULL, 'IT');
INSERT INTO locations VALUES( 1200, '2017 Shinjuku-ku', '1689', 'Tokyo', 'Tokyo Prefecture', 'JP');
INSERT INTO locations VALUES( 1300, '9450 Kamiya-cho', '6823', 'Hiroshima', NULL, 'JP');
INSERT INTO locations VALUES( 1400, '2014 Jabberwocky Rd', '26192', 'Southlake', 'Texas', 'US');
INSERT INTO locations VALUES( 1500, '2011 Interiors Blvd', '99236', 'South San Francisco', 'California', 'US');
INSERT INTO locations VALUES( 1600, '2007 Zagora St', '50090', 'South Brunswick', 'New Jersey', 'US');
INSERT INTO locations VALUES( 1700, '2004 Charade Rd', '98199', 'Seattle', 'Washington', 'US');
INSERT INTO locations VALUES( 1800, '147 Spadina Ave', 'M5V 2L7', 'Toronto', 'Ontario', 'CA');
INSERT INTO locations VALUES( 1900, '6092 Boxwood St', 'YSW 9T2', 'Whitehorse', 'Yukon', 'CA');